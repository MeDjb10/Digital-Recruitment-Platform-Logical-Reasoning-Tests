<h2 class="text-3xl font-bold text-center mb-8 text-gray-800">{{ testType }}</h2>
<div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl shadow-md mb-8 flex justify-center items-center" > 
    <h3 class="font-semibold text-lg text-gray-700 mr-3">Predicted Performance: </h3>
    <p class="text-2xl font-bold text-purple-600">{{ Performance }}</p>
</div>
<div class="grid grid-cols-4 gap-6 mb-8 text-center">
    <div
        class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl shadow-md transform hover:scale-105 transition-transform duration-300">
        <h3 class="font-semibold text-lg text-gray-700 mb-2">Time Spent</h3>
        <p class="text-2xl font-bold text-blue-600">{{ timeSpent }}</p>
    </div>
    <div
        class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl shadow-md transform hover:scale-105 transition-transform duration-300">
        <h3 class="font-semibold text-lg text-gray-700 mb-2">Score</h3>
        <p class="text-2xl font-bold text-green-600">{{ score }}/40</p>

    </div>
    <div
        class="bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-xl shadow-md transform hover:scale-105 transition-transform duration-300">
        <h3 class="font-semibold text-lg text-gray-700 mb-2">Inversed Answers</h3>
        <p class="text-2xl font-bold text-yellow-600">{{ inversedAnswers }}</p>
    </div>
    <div
        class="bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-xl shadow-md transform hover:scale-105 transition-transform duration-300">
        <h3 class="font-semibold text-lg text-gray-700 mb-2">Skipped Questions</h3>
        <p class="text-2xl font-bold text-red-600">{{ skippedQuestions }}</p>
    </div>
</div>
<br>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Stats for each question -->
    <div>
        <h3 class="font-bold text-xl mb-4 text-gray-800">Time Distribution per Question</h3>
        <div class="">
            <apx-chart [series]="chartOptions.series!" [chart]="chartOptions.chart!"
                [dataLabels]="chartOptions.dataLabels!" [plotOptions]="chartOptions.plotOptions!"
                [colors]="chartOptions.colors!"></apx-chart>
        </div>
    </div>
    <!-- AI Comments Section -->
    <div>
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-xl text-gray-800">AI Analysis</h3>
                <button (click)="isAiAnalysisVisible = !isAiAnalysisVisible" 
                        class="px-3 py-1 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors duration-300">
                    {{ isAiAnalysisVisible ? 'Hide Analysis' : 'Show Analysis' }}
                </button>
            </div>
            <div *ngIf="isAiAnalysisVisible" class="">
                <div *ngFor="let comment of aiComments; let i = index"
                    class="bg-white hover:p-4 hover:rounded-xl hover:shadow-lg transition-all duration-300">
                    <p class="text-gray-700 italic mb-4">"{{ comment.text }}"</p>
                    <div class="flex items-center gap-4">
                        <button (click)="handleReaction(i, true)"
                            [class]="comment.reaction === true ? '  text-green-500' : ' text-green-500'"
                            class="rounded-full transition-colors duration-300 hover:text-green-600  hover:scale-110 hover:shadow-lg">
                            <i [class]="comment.reaction === true ? 'pi pi-thumbs-up-fill' : 'pi pi-thumbs-up'"></i>
                        </button>
                        <button (click)="handleReaction(i, false)"
                            [class]="comment.reaction === false ? ' text-red-500' : ' text-red-500'"
                            class="rounded-full transition-all duration-300 hover:text-red-600 hover:scale-110 hover:shadow-lg">
                            <i
                                [class]="comment.reaction === false ? 'pi pi-thumbs-down-fill' : 'pi pi-thumbs-down'"></i>
                        </button>
                        <input [(ngModel)]="comment.feedback" type="text" placeholder="Your feedback"
                            class="p-2 border rounded-lg flex-1 focus:ring-2 focus:ring-blue-300 focus:outline-none" />
                    </div>
                </div>
            </div>
        </div>

        <hr class="my-8 border-t border-gray-200 w-full">

        <!-- Psychologist Comment Section -->
        <div class="bg-white  ">
            <h3 class="font-bold text-xl mb-4 text-gray-800">Psychologist's Analysis</h3>
            <textarea [(ngModel)]="psychologistComment" placeholder="Enter your professional analysis here..."
                class="w-full p-4 border rounded-lg focus:ring-2 focus:ring-blue-300 focus:outline-none min-h-[150px]"></textarea>
        </div>
    </div>
</div>
<!-- Time Chart Section
    <div class="mb-8 bg-white p-6 rounded-xl shadow-md">
        <h3 class="font-bold text-xl mb-4 text-gray-800">Time Spent per Question</h3>
        <p-chart type="bar" [data]="timeChartData" [style]="{'width': '100%', 'height': '300px'}"></p-chart>
    </div> -->