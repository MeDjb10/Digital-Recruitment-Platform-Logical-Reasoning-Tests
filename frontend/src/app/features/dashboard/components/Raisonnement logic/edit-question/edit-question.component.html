<div class="max-w-7xl mx-auto px-4 py-6">
  <div
    class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 border-b border-gray-200"
  >
    <button
      (click)="goBack()"
      class="flex items-center text-indigo-600 hover:text-indigo-800 transition-colors duration-200 font-medium cursor-pointer mb-4 sm:mb-0
      hover:bg-indigo-50 rounded px-4 py-2 
      focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
      [disabled]="loading"
    >
      <i class="pi pi-arrow-left mr-2"></i>
      <span>Back to Test</span>
    </button>
    <h2 class="text-2xl font-bold text-gray-800 mt-4 sm:mt-0">Edit Question</h2>
  </div>

  <div *ngIf="loading" class="flex flex-col items-center justify-center py-12">
    <div
      class="w-12 h-12 border-4 border-gray-200 border-t-indigo-600 rounded-full animate-spin mb-4"
    ></div>
    <p class="text-gray-500 font-medium">Loading question...</p>
  </div>

  <div
    *ngIf="!loading && !question"
    class="bg-red-50 border border-red-100 rounded-lg p-6 text-center my-8"
  >
    <p class="text-red-800 mb-4">
      Unable to load the question. It may have been deleted or you don't have
      permission to access it.
    </p>
    <button
      (click)="goBack()"
      class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors duration-200"
    >
      Return to Test Details
    </button>
  </div>

  <app-domino-layout-builder
    *ngIf="!loading && question"
    [testId]="testId"
    [initialQuestion]="question"
    [mode]="'edit'"
    (save)="onQuestionSaved($event)"
    (cancel)="onCancel()"
  ></app-domino-layout-builder>
</div>
